w = [[[0,0,1,1],[0,1,0,1]],
    [[0,0,0,0],[0,1,2,3]],
    [[0,1,2,3],[0,0,0,0]],
    [[0,0,1,1],[0,1,1,2]],
    [[0,0,1,1],[0,1,-1,0]],
    [[0,0,0,1],[0,1,2,2]],
    [[0,0,0,1],[0,1,2,0]],
    [[0,1,1,1],[2,0,1,2]],
    [[0,1,1,1],[0,0,1,2]],
    [[0,1,2,2],[0,0,0,1]],
    [[2,2,1,0],[0,1,1,1]],
    [[0,0,1,2],[1,0,0,0]],
    [[0,0,1,2],[0,1,1,1]],
    [[0,0,0,1],[0,1,2,1]],
    [[0,1,1,1],[1,0,1,2]],
    [[0,1,1,2],[0,0,1,0]],
    [[0,1,1,2],[1,0,1,1]],
    [[0,1,1,2],[1,0,1,0]],
    [[0,1,1,2],[0,0,1,1]]]
answer = 0
n, m = map(int, input().split(' '))
b = [list(map(int, input().split())) for _ in range(n)]

for i in range(n):
    for j in range(m):
        for t in range(19):
            tmp = 0
            for z in range(4):
                try:
                # if not ((0 <= (i + w[t][0][z]) < n) and (0 <= (j + w[t][1][z]) < m)):
                #     break
                    tmp += b[i + w[t][0][z]][j + w[t][1][z]]
                except IndexError:
                    continue
            answer  = max(tmp, answer)

print(answer)

#test case

# 5 5
# 1 2 3 4 5
# 5 4 3 2 1
# 2 3 4 5 6
# 6 5 4 3 2
# 1 2 1 2 1

# 4 5
# 1 2 3 4 5
# 1 2 3 4 5
# 1 2 3 4 5
# 1 2 3 4 5

# 4 10
# 1 2 1 2 1 2 1 2 1 2
# 2 1 2 1 2 1 2 1 2 1
# 1 2 1 2 1 2 1 2 1 2
# 2 1 2 1 2 1 2 1 2 1